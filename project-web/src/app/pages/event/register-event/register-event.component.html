<app-title [title]="'Cadastrar Eventos'"></app-title>

<mat-form [formGroup]="registerForm">
    <div fxLayout="row" fxLayoutAlign="space-between stretch">
        <mat-card fxFlex class="mat-elevation-z3">
            <mat-card-content>
                <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-form-field fxFlex="45">
                        <input matInput placeholder="Tema" formControlName="theme">
                        <button mat-button *ngIf="theme" matSuffix mat-icon-button aria-label="Clear" (click)="theme=''">
                        <mat-icon>close</mat-icon>
                       </button>
                        <mat-error *ngIf="registerForm.get('theme').hasError('required')">
                            Tema é <strong>obrigatório</strong>
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="example-margin" fxFlex="20">
                        <input type="number" matInput placeholder="Pessoas" formControlName="amountPeople">
                    </mat-form-field>

                    <mat-form-field fxFlex="20">
                        <input matInput [matDatepicker]="picker" placeholder="Selecione a data" formControlName="date">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="registerForm.get('date').hasError('required')">
                            Data é <strong>obrigatório</strong>
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field fxFlex="100">
                        <input matInput type="text" placeholder="Local" formControlName="place">
                        <button mat-button *ngIf="place" matSuffix mat-icon-button aria-label="Clear" (click)="place=''">
                            <mat-icon>close</mat-icon>
                        </button>
                        <mat-error *ngIf="registerForm.get('place').hasError('required')">
                            Local é <strong>obrigatório</strong>
                        </mat-error>
                    </mat-form-field>
                    <!-- <mat-form-field fxFlex="45">
                        <input matInput type="text" placeholder="Imagem" formControlName="imagemUrl">
                        <button mat-button *ngIf="imagemUrl" matSuffix mat-icon-button aria-label="Clear" (click)="imagemUrl=''">
                   <mat-icon>close</mat-icon>
                    </button>
                        <mat-error *ngIf="registerForm.get('imagemUrl').hasError('required')">
                            Imagem é <strong>obrigatório</strong>
                        </mat-error>
                    </mat-form-field> -->

                    <mat-form-field fxFlex="45">
                        <input matInput placeholder="Email" formControlName="email">
                        <button mat-button *ngIf="email" matSuffix mat-icon-button aria-label="Clear" (click)="email=''">
                     <mat-icon>close</mat-icon>
                      </button>
                        <mat-error *ngIf="registerForm.get('email').hasError('email') && !registerForm.get('email').hasError('required')">
                            Por favor entre com endereço de e-mail válido
                        </mat-error>
                        <mat-error *ngIf="registerForm.get('email').hasError('required')">
                            Email é <strong>obrigatório</strong>
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field fxFlex="45">
                        <span matPrefix>+11 &nbsp;</span>
                        <input type="tel" matInput placeholder="Número de contato" formControlName="phone">
                        <button mat-button *ngIf="phone" matSuffix mat-icon-button aria-label="Clear" (click)="phone=''">
                    <mat-icon>close</mat-icon>
                      </button>
                        <mat-icon matSuffix>mode_edit</mat-icon>
                    </mat-form-field>

                    <div fxFlex="45">
                        <mat-card-content>
                            <ul>
                                <mat-progress-bar mode="determinate"></mat-progress-bar>
                                <span id="file-label">
                                </span>
                            </ul>
                        </mat-card-content>
                        <mat-card-actions>
                            <button mat-button color="primary" (click)="fileUpload.click()">
                              <mat-icon>file_upload</mat-icon>
                                  Upload de Imagem
                            </button>
                        </mat-card-actions>
                        <input type="file" #fileUpload id="fileUpload" name="fileUpload" (change)="onFileChange($event)" style="display:none;" formControlName="imagemUrl" />
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
    <mat-dialog-actions align="center">
        <div class="button-row">
            <ng-container *ngIf="edit; else elseTemplate">
                <button mat-button [disabled]="registerForm.invalid" (click)="put()" mat-dialog-close color="primary">Salvar</button>
            </ng-container>
            <ng-template #elseTemplate>
                <button mat-button [disabled]="registerForm.invalid" (click)="add()" mat-dialog-close color="primary">Salvar</button>
            </ng-template>
            <button mat-button color="primary" mat-dialog-close>Fechar</button>
        </div>
    </mat-dialog-actions>
    <p>Form Value: {{registerForm.value | json}} </p>
    <p>Form Status: {{registerForm.status | json}} </p>
</mat-form>
